# ПАПАЖКХ — LOGIC_CHECKLIST v1.4

Назначение: контроль корректности логики версии v1.4.

---

## CRITICAL минимум

1. Одно начисление на месяц
2. Начисление readonly
3. Формат оплаты 0.00, ,→.
4. Enter → дата оплаты
5. Дата оплаты и год/месяц совпадают
6. Оплата за период влияет только на пеню
7. Исключённые периоды отключают только пеню
8. Мораторий меняет только ставки
9. Нарастающий итог стабилен
10. История не переносится при смене ответственного
11. Новый абонент стартует с нуля (CRITICAL): до даты начала расчёта pay_main=0, pay_penalty=0, total_debt=0 (нет наследственного долга)

---

## 1. Импорт Excel

- use_period всегда false
- period_from/to пустые
- paid и paid_date импортируются
Ожидаемо: пеня не меняется.

---

## 2. Ручная оплата

- формат суммы соблюдён
- Enter переводит фокус на дату

---

## 3. Оплата за период

- активируется только кнопкой
- период произвольный
- пеня пересчитывается
- основной долг не меняется

---

## 4. Совместимость

- старые данные работают без изменений


---

## 5. Нулевой старт (CRITICAL-тест)

- Создать нового абонента с calcStartDate = 01.01.2025.
- Проверить расчёты до 01.01.2025 → все долги и пени = 0.
- Проверить январь 2025 → долг считается только из начислений/оплат после calcStartDate.
